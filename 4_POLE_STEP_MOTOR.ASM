	;---------------ÝKÝ YÖNLÜ BIPOLAR STEP MOTOR KONTROL------------------------
	LIST	P=16F877A
	INCLUDE	"P16F877A.INC"
	__CONFIG	_LVP_OFF&_BODEN_OFF&_CP_OFF&_WDT_OFF&_PWRTE_ON&_XT_OSC
	CBLOCK	H'20'
	D1,D2,ATLA,ATLA2,SAY,SAY2
	ENDC
	ORG		H'00'
	BSF		STATUS,5
	CLRF	TRISB
	MOVLW	H'FF'
	MOVWF	TRISA
	MOVLW	H'07'
	MOVWF	ADCON1
	BCF		STATUS,5
	CLRF	PORTB

BASLA
	MOVLW	H'00'
	;MOVLW	H'FF'
	MOVWF	ATLA
	MOVLW	H'08'
	MOVWF	SAY
	MOVWF	SAY2
	MOVLW	H'07'
	MOVWF	ATLA2

TEST1
	BTFSC	PORTA,0
	GOTO	TEST2
;	BTFSS	PORTA,0
;	GOTO	$-1
;	CALL	GECIK
	MOVF	ATLA,W
;	ANDLW	H'07'
	CALL	CEVTAB
	ANDLW	H'0F'
	MOVWF	PORTB
	CALL	GECIK
	INCF	ATLA,F
	DECFSZ	SAY,F
	GOTO	TEST1
	GOTO	BASLA
TEST2
	BTFSC	PORTA,1
	GOTO	TEST1
	MOVF	ATLA2,W
	CALL	CEVTAB
	ANDLW	H'0F'
	MOVWF	PORTB
	CALL	GECIK
	DECF	ATLA2,F
	DECFSZ	SAY2,F
	GOTO	TEST2
	GOTO	BASLA

CEVTAB
	ADDWF	PCL,F
	RETLW b'1000' ;0.adým
	RETLW b'1100' ;1.adým
	RETLW b'0100' ;2.adým
	RETLW b'0110' ;3.adým
	RETLW b'0010' ;4.adým
	RETLW b'0011' ;5.adým
	RETLW b'0001' ;6.adým
	RETLW b'1001' ;7.adým

;	RETLW b'0001' ;0.adým
;	RETLW b'1001' ;1.adým
;	RETLW b'1000' ;2.adým
;	RETLW b'1010' ;3.adým
;	RETLW b'0010' ;4.adým
;	RETLW b'0110' ;5.adým
;	RETLW b'0100' ;6.adým
;	RETLW b'0101' ;7.adým
	
GECIK				;10ms 
	MOVLW	H'58'
	MOVWF	D1
DN1
	MOVLW	H'58'
	MOVWF	D2
DN2
	DECFSZ	D2,F
	GOTO	DN2
	DECFSZ	D1,F
	GOTO	DN1
	RETURN
	END	
; --------------------Burak ÞEN Ýnönü Üniversitesi-------------------- 
;------------Elektrik Elektronik Mühendisliði Öðrencisi-----------------